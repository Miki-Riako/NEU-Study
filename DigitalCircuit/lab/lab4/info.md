# 实验4  交通信号灯控制系统设计与Verilog实现
## 一、实验目的
(1)	掌握多位计数器的设计方法；

(2)	掌握分频电路的设计方法；

(3)	掌握控制器的设计方法；

(4)	掌握8位数码管的动态扫描显示的设计方法；

(5)	掌握FPGA的层次化设计方法。

## 二、实验主要仪器设备
(1)	FPGA实验板。

(2)	软件为Vivado2018.3，ModelSim 10.6c

## 三、设计任务与要求
### 1. 基本任务及要求
十字路口由一条主道和支道构成。主道和支道均有红、绿、黄3种信号灯。

通常保持主道绿灯、支道红灯。只有当支道有车时，且主道计时的时间到，才转为主道红灯，支道绿灯。

绿灯转红灯过程中，先由绿灯转为黄灯，3秒钟后再由黄灯转为红灯；同时对方红灯转绿灯。

当两个方向同时有车时，红、绿灯应每隔30秒变换一次，应扣除绿灯转红灯过程中有3秒黄灯过渡，绿灯实际只亮27秒；如图1所示。

若仅一个方向有车时，处理方法是：该方向原来为红灯时，另一个方向立即由绿灯变为黄灯，3秒钟后再由黄灯变为红灯，同时本方向由红灯变为绿灯。该方向原为绿灯时，继续保持绿灯。当另一方向有车来时，作两个方向均有车处理。

![图1 主道与支道信号灯与时间关系](/DigitalCircuit/DCLab/image/1.png "图1 主道与支道信号灯与时间关系")

### 2. 扩展任务及要求
(1)	当两个方向同时有车时，主道红、绿灯每隔30秒变换一次，支道每隔20秒变换一次。

![图2主道与支道信号灯时间不相等状态图](/DigitalCircuit/DCLab/image/2.png "图2主道与支道信号灯时间不相等状态图")

(2)	图2采用置最大时间、减计时；例如置27后每隔1秒减1。

(3)	当两个方向增加左转信号灯。
- 主道是直行绿灯为27秒，转为黄灯3秒，再转为左转绿灯12秒，再转为黄灯3秒，所消耗的时间一共为45秒。
- 支道是直行绿灯为17秒，转为黄灯3秒，再转为左转绿灯7秒，再转为黄灯3秒，所消耗的时间一共为30秒。

![图3 增加左转信号灯状态图](/DigitalCircuit/DCLab/image/3.png "图3 增加左转信号灯状态图")
